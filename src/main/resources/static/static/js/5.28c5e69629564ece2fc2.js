webpackJsonp([5],{"1nb1":function(t,e){},"2w1R":function(t,e,n){"use strict";var i=n("Xxa5"),r=n.n(i),a=n("mtWM"),s=n.n(a);var o={name:"UE",data:function(){return{editor:null,jwt:"",config:"",contenturl:"",content:"",content1:""}},created:function(){var t,e=this;return(t=r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}},t,e)}),function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})})()},mounted:function(){},methods:{init:function(){var t=this,e="";s.a.get("http://47.112.132.177:8250/ueditor").then(function(n){e=n.data,console.log(e),e.initialFrameWidth="100%",e.initialFrameHeight=300,e.maximumWords=1e5;var i=t;t.editor=UE.getEditor("editor",e),t.editor.ready(function(){UE.getEditor("editor").addListener("contentChange",function(){i.content=UE.getEditor("editor").getContent(),i.content1=UE.getEditor("editor").getContentTxt()})}),UE.Editor.prototype._bkGetActionUrl=UE.Editor.prototype.getActionUrl,UE.Editor.prototype.getActionUrl=function(t){return"uploadimage"==t||"uploadscrawl"==t||"uploadimage"==t?"http://47.112.132.177:8250/imgUpload":"uploadvideo"==t?"http://47.112.132.177:8250/videoUpload":"uploadfile"==t?"http://47.112.132.177:8250/fileUpload":this._bkGetActionUrl.call(this,t)}})},clearContent:function(){return this.content1="",this.content="",this.contenturl="",this.editor.execCommand("cleardoc")}},beforeDestroy:function(){null!==this.editor&&this.editor.destroy&&this.editor.destroy()}},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"uEditor"},[e("div",{attrs:{id:"editor",type:"text/plain"}})])])}]};var l=n("VU/8")(o,c,!1,function(t){n("L9x+")},null,null);e.a=l.exports},"L9x+":function(t,e){},MN5D:function(t,e){},RtzI:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),r=n.n(i),a=n("2w1R"),s=n("W118"),o=n("D2Ra");var c={mounted:function(){},data:function(){return{imgsUrl:[],dialogImageUrl:"",dialogVisible:!1}},methods:{handleChange:function(t,e){var n,i=this;return(n=r.a.mark(function e(){var n,a,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.imgsUrl.length<5)){e.next=11;break}if(!(t.size/1024/1024<2)){e.next=10;break}return(n=new FormData).append("upload_file",t.raw),e.next=6,Object(o.S)(n);case 6:0==(a=e.sent).status&&(s=a.data.url,i.imgsUrl.push({uid:t.uid,url:s})),e.next=11;break;case 10:i.$message({message:"请上传小于2M的图片",type:"warning",duration:"1500"});case 11:case"end":return e.stop()}},e,i)}),function(){var t=n.apply(this,arguments);return new Promise(function(e,n){return function i(r,a){try{var s=t[r](a),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});e(o)}("next")})})()},handleRemove:function(t,e){this.imgsUrl=this.imgsUrl.filter(function(e){return e.uid!==t.uid})},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},beforeUpload:function(t){return!0},clearAll:function(){this.imgsUrl=[],this.dialogImageUrl="",this.dialogVisible=!1,this.$refs.upload.clearFiles()}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uploadImages"},[n("el-upload",{ref:"upload",attrs:{action:"api/elegant/upload","list-type":"picture-card","before-upload":t.beforeUpload,"on-change":t.handleChange,"auto-upload":!1,accept:"image/*","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,limit:5}},[n("i",{staticClass:"el-icon-plus"})]),t._v(" "),n("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var u=n("VU/8")(c,l,!1,function(t){n("1nb1")},null,null).exports,d=n("NYxO"),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function h(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function i(r,a){try{var s=e[r](a),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){i("next",t)},function(t){i("throw",t)});t(o)}("next")})}}var f={data:function(){return{editor:null,jwt:"",config:"",types:"",name:"",subtitle:"",subImages:"",detail:"",price:"",stock:"",categoryId:[],typesName:[],loading:!1}},components:{Ueditor:a.a,Tag:s.a,UploadImg:u},created:function(){this.choiceMenuId("uploadGood"),this.reqTypes(),this.changePathNames([{name:"商品管理"},{name:"商品上传"}])},methods:p({},Object(d.b)(["choiceMenuId","changePathNames"]),{upload:function(){var t=this;return h(r.a.mark(function e(){var n,i,a,s,c,l,u,d,p,h,f;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.detail=t.$refs.ueditor.content,n=t.$refs.mainImages.imgsUrl,i=t.detail,a=t.stock,s=t.price,c=t.subtitle,l=t.name,u=t.categoryId,!(i&&n.length>0&&a&&s&&c&&l&&u)){e.next=23;break}return d=n,t.subImages="",d.map(function(e){return t.subImages=t.subImages+e.url+","}),t.subImages=t.subImages.slice(0,t.subImages.length-1),p=t.subImages,(h=new FormData).append("detail",i),h.append("subImages",p),h.append("stock",a),h.append("price",s),h.append("subtitle",c),h.append("name",l),h.append("categoryId",u),e.next=19,Object(o.Q)(h);case 19:0==(f=e.sent).status?(t.message("新增产品成功",1500,"success"),t.clearAll()):t.message(f.msg,1500,"error"),e.next=24;break;case 23:t.message("请输入完整商品信息",1500,"warning");case 24:case"end":return e.stop()}},e,t)}))()},reqTypes:function(){var t=this;return h(r.a.mark(function e(){var n,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.next=3,Object(o.r)({categoryId:n});case 3:0===(i=e.sent).status&&(t.types=i.data);case 5:case"end":return e.stop()}},e,t)}))()},choiceType:function(t,e){if(this.categoryId.length<1){for(var n=!1,i=0;i<this.categoryId.length;i++)if(this.categoryId[i]==t)return void(n=!0);n||(this.categoryId.push(t),this.typesName.push({id:t,name:e}))}else this.$message({message:"一件商品最多添加1个类型",duration:1e3,type:"warning"})},outType:function(t){this.categoryId=this.categoryId.filter(function(e){return e!=t}),this.typesName=this.typesName.filter(function(e){return e.id!==t})},message:function(t,e,n){this.$message({message:t,duration:e,type:n})},clearAll:function(){this.$refs.ueditor.clearContent(),this.$refs.mainImages.clearAll(),this.name="",this.subtitle="",this.subImages="",this.detail="",this.price="",this.stock="",this.typesName="",this.categoryId=[]}}),watch:{price:function(t,e){var n=t,i=n.substr(0,1),r=n.substr(1,1);if(n.length>1&&0==i&&"."!=r&&(n=n.substr(1,1)),"."==i&&(n=""),-1!=n.indexOf(".")){var a=n.substr(n.indexOf(".")+1);-1!=a.indexOf(".")&&(n=n.substr(0,n.indexOf(".")+a.indexOf(".")+1))}n=n.replace(/[^\d^\.]+/g,""),/\.\d\d\d$/.test(n)&&(n=n.slice(0,n.indexOf(".")+3)),this.price=n}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"uploadGood"},[n("form",{staticClass:"uploadform"},[n("div",{staticClass:"form-group"},[t._m(0),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:"请输入商品名称,最多50个字。",id:"shopName",maxlength:"50","show-word-limit":""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[t._m(1),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:"请输入商品名称,最多50个字。",id:"subtitleName",maxlength:"50","show-word-limit":""},model:{value:t.subtitle,callback:function(e){t.subtitle=e},expression:"subtitle"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[t._m(2),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:"请输入商品单价（例如500.00）",id:"shopPrice"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[t._m(3),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:"请输入商品库存（例如500）",id:"shopStock",oninput:"value=value.replace(/[^\\d]/g,'')"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}})],1),t._v(" "),n("div",{staticClass:"form-group"},[t._m(4),t._v(" "),n("div",[n("div",{staticClass:"input-group"},[n("div",{staticClass:"input-group-btn"},[t._m(5),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.types,expression:"types"}],staticClass:"dropdown-menu"},t._l(t.types,function(e,i){return e.status?n("li",{key:i},[n("a",{attrs:{href:"javascript:;"},on:{click:function(){return t.choiceType(e.id,e.name)}}},[t._v(t._s(e.name))])]):t._e()}),0)]),t._v(" "),n("Tag",{attrs:{typesname:t.typesName},on:{outtype:t.outType}})],1)])]),t._v(" "),n("div",{staticClass:"form-group"},[t._m(6),t._v(" "),n("UploadImg",{ref:"mainImages"})],1),t._v(" "),n("div",{staticClass:"form-group"},[t._m(7),t._v(" "),n("Ueditor",{ref:"ueditor"})],1),t._v(" "),n("el-button",{attrs:{id:"uploadButton"},on:{click:t.upload}},[t._v("商品上传")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"shopName"}},[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品名称：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"subtitleName"}},[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品副标题：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"shopPrice"}},[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品单价：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"shopStock"}},[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品库存：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品类型：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"btn btn-default dropdown-toggle",staticStyle:{"margin-right":"15px"},attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[this._v("选择类型 "),e("span",{staticClass:"caret"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("图片(最多五张，第一张为主图)：")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("i",{staticStyle:{color:"red","margin-right":"5px"}},[this._v("*")]),this._v("商品介绍：")])}]};var g=n("VU/8")(f,m,!1,function(t){n("MN5D")},null,null);e.default=g.exports},W118:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tag"},t._l(t.typesname,function(e){return n("el-tag",{key:e.id,attrs:{closable:""},on:{close:function(n){return t.handleClose(e.id)}}},[t._v("\n    "+t._s(e.name)+"\n  ")])}),1)},staticRenderFns:[]};var r=n("VU/8")({data:function(){return{}},props:["typesname"],mounted:function(){},methods:{handleClose:function(t){this.$emit("outtype",t)}}},i,!1,function(t){n("uS0b")},null,null);e.a=r.exports},uS0b:function(t,e){}});