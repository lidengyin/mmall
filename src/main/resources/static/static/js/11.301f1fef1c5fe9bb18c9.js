webpackJsonp([11],{ERCO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("QAjq"),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goodDetail"},[s("div",{staticClass:"searchDiv"},[s("Search")],1),t._v(" "),t.error?s("div",[s("div",{staticClass:"outError"},[s("img",{attrs:{src:a("Q1lq"),alt:""}}),t._v(" "),s("div",{staticClass:"fontDiv"},[s("span",{staticClass:"fontError"},[t._v("获取商品详情出错")]),t._v(" "),s("el-button",{staticClass:"returnOrder",attrs:{type:"text"},on:{click:t.toMain}},[t._v("前往主页")])],1)])]):s("div",[s("div",{staticClass:"goodInfoDiv"},[t._m(0),t._v(" "),s("div",{staticClass:"imgsDiv"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.mainImage,expression:"mainImage"}],staticClass:"bigImg",attrs:{alt:""}}),t._v(" "),s("div",{staticClass:"smallImgDiv"},t._l(t.subImages,function(e,a){return s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:a,staticClass:"smallImg",attrs:{alt:""},on:{mouseenter:function(){return t.choiceBigImg(e)}}})}),0)]),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"title"},[t._v("\n          "+t._s(t.myGood.name)+"\n        ")]),t._v(" "),s("div",{staticClass:"subtitle"},[t._v("\n          "+t._s(t.myGood.subtitle)+"\n        ")]),t._v(" "),s("div",{staticClass:"price"},[t._v("\n          价格："),s("span",[t._v("￥"+t._s(t.myGood.price))])]),t._v(" "),s("div",{staticClass:"stock"},[t._v("\n          库存："),s("span",[t._v(t._s(t.myGood.stock))])]),t._v(" "),s("div",{staticClass:"count"},[t._v("\n          数量："),s("el-input-number",{staticStyle:{"margin-left":"10px"},attrs:{min:1,max:t.myGood.stock,label:"描述文字"},on:{change:t.handleChange},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),t._v(" "),s("div",{staticClass:"bug"},[s("el-button",{attrs:{type:"danger"},on:{click:t.addGood}},[t._v("加入购物车")])],1)])]),t._v(" "),t._m(1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navDiv"},[e("ul",[e("li",[this._v("商品详情")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"goodDetailDiv"},[e("div",{staticClass:"navDiv"},[e("ul",[e("li",[this._v("商品介绍")])])]),this._v(" "),e("div",{staticClass:"detail"},[e("div",{attrs:{id:"manageGoodDetail"}})])])}]};var i=function(t){a("EoM7")},r=a("VU/8")(s.a,n,!1,i,null,null);e.default=r.exports},EoM7:function(t,e){},QAjq:function(t,e,a){"use strict";(function(t){var s=a("Xxa5"),n=a.n(s),i=a("NYxO"),r=a("9kaH"),o=a("D2Ra"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(n,i){try{var r=e[n](i),o=r.value}catch(t){return void a(t)}if(!r.done)return Promise.resolve(o).then(function(t){s("next",t)},function(t){s("throw",t)});t(o)}("next")})}}e.a={name:"goodDetail",data:function(){return{myGood:"",id:"",mainImage:"",subImages:[],count:1,dialogFormVisible:!1,error:!1}},computed:c({},Object(i.c)([])),components:{Search:r.a},created:function(){this.$route.query.id?(this.id=this.$route.query.id,this.reqGoodDetail(this.id)):this.$router.replace({name:"main"})},methods:c({},Object(i.b)(["savecartcount","setuser"]),{toMain:function(){this.$router.replace({name:"main"})},getCartCount:function(){var t=this;return u(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.k)();case 2:a=e.sent,console.log(a),0===a.status&&t.savecartcount(a.data);case 5:case"end":return e.stop()}},e,t)}))()},reqGoodDetail:function(e){var a=this;return u(n.a.mark(function s(){var i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(o.B)({productId:e});case 2:0===(i=s.sent).status?(a.myGood=i.data,a.mainImage=a.myGood.mainImage,a.subImages=a.myGood.subImages.split(","),console.log(a.subImages),t("#manageGoodDetail").html(a.myGood.detail)):(a.error=!0,a.message(i.msg,1500,"error"));case 4:case"end":return s.stop()}},s,a)}))()},addGood:function(){var t=this;return u(n.a.mark(function e(){var a,s,i,r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("null"==sessionStorage.getItem("haichuang_user")){e.next=11;break}return a=t.myGood,s=t.count,(i=new FormData).append("productId",a.id),i.append("count",s),e.next=7,Object(o.b)(i);case 7:0===(r=e.sent).status?(t.getCartCount(),t.message("商品已添加入购物车",1500,"success")):t.message(r.msg,1500,"error"),e.next=12;break;case 11:t.dialogFormVisible=!0;case 12:case"end":return e.stop()}},e,t)}))()},choiceBigImg:function(t){console.log(t),this.mainImage=t},handleChange:function(t){this.count=t},message:function(t,e,a){this.$message({message:t,duration:e,type:a})}})}}).call(e,a("7t+N"))}});