webpackJsonp([18],{"1Bk9":function(t,e){},LG6D:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),s=r("D2Ra"),i=r("NYxO"),o=r("9kaH"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};function u(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function a(n,s){try{var i=e[n](s),o=i.value}catch(t){return void r(t)}if(!i.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}var l={data:function(){return{Orders:[],orders:[],pageNum:1,pageSize:5}},computed:c({},Object(i.c)([])),components:{Search:o.a},created:function(){var t=this;return u(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"null"!=sessionStorage.getItem("haichuang_user")?(t.setuser(JSON.parse(sessionStorage.getItem("haichuang_user"))),t.reqOrderLists(1)):(t.message("用户未登录！",1200,"warning"),t.$router.replace({name:"login"}));case 1:case"end":return e.stop()}},e,t)}))()},mounted:function(){},methods:c({},Object(i.b)(["setuser"]),{gotoDetail:function(t){var e=this;return u(n.a.mark(function r(){return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.$router.push({name:"orderDetailUser",query:{orderNo:JSON.stringify(t)}});case 1:case"end":return r.stop()}},r,e)}))()},goToPay:function(t){this.$router.push({name:"pay",query:{orderNo:JSON.stringify(t)}})},cancleOrder:function(t){var e=this;this.$confirm("确认取消该订单吗","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u(n.a.mark(function r(){var a;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return(a=new FormData).append("orderNo",t),r.next=4,Object(s.d)(a);case 4:0==r.sent.status&&e.reqOrderLists(1);case 6:case"end":return r.stop()}},r,e)})))},reqOrderLists:function(t){var e=this;return u(n.a.mark(function r(){var a,i,o;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e.pageNum=t,a=e.pageNum,i=e.pageSize,r.next=4,Object(s.A)({pageNum:a,pageSize:i});case 4:0==(o=r.sent).status?(e.Orders=o.data,e.orders=o.data.list):e.message(o.msg,1500,"error");case 6:case"end":return r.stop()}},r,e)}))()},handleCurrentChange:function(t){this.reqOrderLists(t)},message:function(t,e,r){this.$message({message:t,duration:e,type:r})}})},p={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"myOrder"},[r("Search"),t._v(" "),r("div",{staticClass:"orderListsDiv"},[t._m(0),t._v(" "),r("div",{staticClass:"orderLists"},t._l(t.orders,function(e,a){return r("ul",{key:a},[r("div",{staticClass:"orderNoNav"},[r("span",{staticClass:"createTime"},[t._v(t._s(e.createTime.slice(0,10)))]),t._v(" "),r("span",{staticClass:"createNo"},[t._v("订单号："+t._s(e.orderNo))]),t._v(" "),r("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"text"},on:{click:function(r){return t.gotoDetail(e.orderNo)}}},[t._v("查看详情")])],1),t._v(" "),r("div",{staticClass:"orderLi"},t._l(e.orderItemVoList,function(e,a){return r("li",{key:a},[r("span",{staticClass:"goodInfo"},[r("router-link",{attrs:{to:{name:"detail",query:{id:JSON.stringify(e.productId)}},title:e.productName}},[r("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productImage,expression:"li.productImage"}],staticClass:"cartImage",attrs:{alt:""}}),t._v(" "),r("span",[t._v(t._s(e.productName))])])],1),t._v(" "),r("span",{staticClass:"price"},[t._v("\n              ￥"+t._s(e.currentUnitPrice)+"\n            ")]),t._v(" "),r("span",{staticClass:"count"},[t._v("\n              "+t._s(e.quantity)+"\n            ")])])}),0),t._v(" "),r("div",{staticClass:"orderRight"},[r("span",{staticClass:"pay"},[t._v("\n            ￥"+t._s(e.payment)+"\n          ")]),t._v(" "),r("span",{staticClass:"status"},[t._v("\n            "+t._s(e.statusDesc)+"\n          ")]),t._v(" "),r("span",{staticClass:"caozuo"},[10==e.status?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.goToPay(e.orderNo)}}},[t._v("立即付款")]):t._e(),t._v(" "),10==e.status?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.cancleOrder(e.orderNo)}}},[t._v("取消订单")]):t._e()],1)])])}),0),t._v(" "),r("div",{staticClass:"myPagination"},[r("div",{staticStyle:{display:"inline-block",float:"right","margin-right":"20px"}},[t.Orders.total?r("el-pagination",{attrs:{background:"",layout:"prev, pager, next,total",total:t.Orders.total,"current-page":t.pageNum,"page-size":t.pageSize},on:{"current-change":t.handleCurrentChange}}):t._e()],1)])])],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"orderNav"},[t._v("\n      我的订单：\n      "),r("span",{staticStyle:{width:"470px"}},[t._v("商品信息")]),t._v(" "),r("span",{staticStyle:{width:"120px","margin-left":"20px"}},[t._v("单价")]),t._v(" "),r("span",{staticStyle:{width:"100px"}},[t._v("数量")]),t._v(" "),r("span",{staticStyle:{width:"90px","margin-left":"30px"}},[t._v("合计")]),t._v(" "),r("span",{staticStyle:{width:"100px"}},[t._v("订单状态")])])}]};var d=r("VU/8")(l,p,!1,function(t){r("1Bk9")},null,null);e.default=d.exports}});