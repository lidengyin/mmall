webpackJsonp([13],{"4ck8":function(t,e){},ERCO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("QAjq"),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"goodDetail"},[a("div",{staticClass:"searchDiv"},[a("Search")],1),t._v(" "),a("el-dialog",{attrs:{title:"用户登录",visible:t.dialogFormVisible,width:"400px"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"账号","label-width":"50px"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-s-custom",autocomplete:"off",placeholder:"请输入账号"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",t._n(e))},expression:"form.username"}},[t._v("<")])],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"50px"}},[a("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.toLogin}},[t._v("登录")])],1)],1),t._v(" "),a("div",{staticClass:"goodInfoDiv"},[t._m(0),t._v(" "),a("div",{staticClass:"imgsDiv"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.mainImage,expression:"mainImage"}],staticClass:"bigImg",attrs:{alt:""}}),t._v(" "),a("div",{staticClass:"smallImgDiv"},t._l(t.subImages,function(e,s){return a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e,expression:"img"}],key:s,staticClass:"smallImg",attrs:{alt:""},on:{mouseenter:function(){return t.choiceBigImg(e)}}})}),0)]),t._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[t._v("\n        "+t._s(t.myGood.name)+"\n      ")]),t._v(" "),a("div",{staticClass:"subtitle"},[t._v("\n        "+t._s(t.myGood.subtitle)+"\n      ")]),t._v(" "),a("div",{staticClass:"price"},[t._v("\n        价格："),a("span",[t._v("￥"+t._s(t.myGood.price))])]),t._v(" "),a("div",{staticClass:"stock"},[t._v("\n        库存："),a("span",[t._v(t._s(t.myGood.stock))])]),t._v(" "),a("div",{staticClass:"count"},[t._v("\n        数量："),a("el-input-number",{staticStyle:{"margin-left":"10px"},attrs:{min:1,max:t.myGood.stock,label:"描述文字"},on:{change:t.handleChange},model:{value:t.count,callback:function(e){t.count=e},expression:"count"}})],1),t._v(" "),a("div",{staticClass:"bug"},[a("el-button",{attrs:{type:"danger"},on:{click:t.addGood}},[t._v("加入购物车")])],1)])]),t._v(" "),t._m(1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navDiv"},[e("ul",[e("li",[this._v("商品详情")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"goodDetailDiv"},[e("div",{staticClass:"navDiv"},[e("ul",[e("li",[this._v("商品介绍")])])]),this._v(" "),e("div",{staticClass:"detail"},[e("div",{attrs:{id:"manageGoodDetail"}})])])}]};var o=function(t){a("4ck8")},i=a("VU/8")(s.a,n,!1,o,null,null);e.default=i.exports},QAjq:function(t,e,a){"use strict";(function(t){var s=a("Xxa5"),n=a.n(s),o=a("NYxO"),i=a("9kaH"),r=a("D2Ra"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(t[s]=a[s])}return t};function l(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){return function s(n,o){try{var i=e[n](o),r=i.value}catch(t){return void a(t)}if(!i.done)return Promise.resolve(r).then(function(t){s("next",t)},function(t){s("throw",t)});t(r)}("next")})}}e.a={name:"goodDetail",data:function(){return{myGood:"",id:"",mainImage:"",subImages:[],count:1,dialogFormVisible:!1,form:{username:"",password:""}}},computed:c({},Object(o.c)([])),components:{Search:i.a},created:function(){this.$route.query.id?(this.id=this.$route.query.id,this.reqGoodDetail(this.id)):this.$router.replace({name:"main"})},methods:c({},Object(o.b)(["savecartcount","setuser"]),{toLogin:function(){var t=this;return l(n.a.mark(function e(){var a,s,o,i,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.form,s=a.username,o=a.password,!s||!o){e.next=9;break}return(i=new FormData).append("username",s),i.append("password",o),e.next=7,Object(r.s)(i);case 7:0==(c=e.sent).status?(t.message("登陆成功",1500,"success"),t.setuser(c.data),sessionStorage.setItem("haichuang_user",JSON.stringify(c.data)),t.form.username="",t.form.password="",t.dialogFormVisible=!1):t.message(c.msg,1500,"error");case 9:case"end":return e.stop()}},e,t)}))()},getCartCount:function(){var t=this;return l(n.a.mark(function e(){var a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.k)();case 2:a=e.sent,console.log(a),0===a.status&&t.savecartcount(a.data);case 5:case"end":return e.stop()}},e,t)}))()},reqGoodDetail:function(e){var a=this;return l(n.a.mark(function s(){var o;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(r.B)({productId:e});case 2:0===(o=s.sent).status?(a.myGood=o.data,a.mainImage=a.myGood.mainImage,a.subImages=a.myGood.subImages.split(","),console.log(a.subImages),t("#manageGoodDetail").html(a.myGood.detail)):a.message(o.msg,1500,"error");case 4:case"end":return s.stop()}},s,a)}))()},addGood:function(){var t=this;return l(n.a.mark(function e(){var a,s,o,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("null"==sessionStorage.getItem("haichuang_user")){e.next=11;break}return a=t.myGood,s=t.count,(o=new FormData).append("productId",a.id),o.append("count",s),e.next=7,Object(r.b)(o);case 7:0===(i=e.sent).status?(t.getCartCount(),t.message("商品已添加入购物车",1500,"success")):t.message(i.msg,1500,"error"),e.next=12;break;case 11:t.dialogFormVisible=!0;case 12:case"end":return e.stop()}},e,t)}))()},choiceBigImg:function(t){console.log(t),this.mainImage=t},handleChange:function(t){this.count=t},message:function(t,e,a){this.$message({message:t,duration:e,type:a})}})}}).call(e,a("7t+N"))}});