webpackJsonp([17],{EJYP:function(t,e){},Lpfo:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),s=r("D2Ra");function c(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){return function a(n,s){try{var c=e[n](s),i=c.value}catch(t){return void r(t)}if(!c.done)return Promise.resolve(i).then(function(t){a("next",t)},function(t){a("throw",t)});t(i)}("next")})}}var i={name:"",components:{},data:function(){return{orderNo:"",getOk:"",payOk:"",cancleOk:!1,qrUrl:"",payorno:"",error:""}},methods:{cancleOrder:function(){var t=this;this.$confirm("是否确定取消该订单?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(c(n.a.mark(function e(){var r,a;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.orderNo,(a=new FormData).append("orderNo",r),e.next=5,Object(s.d)(a);case 5:0==e.sent.status&&(t.cancleOk=!0);case 7:case"end":return e.stop()}},e,t)})))},getPayTu:function(){var t=this;return c(n.a.mark(function e(){var r,a,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.orderNo,(a=new FormData).append("orderNo",r),e.next=5,Object(s.v)(a);case 5:0==(i=e.sent).status?(t.getOk=!0,t.qrUrl=i.data.qrUrl,t.payorno=setInterval(c(n.a.mark(function e(){var r;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.I)(a);case 2:0==(r=e.sent).status&&r.data?(t.payOk=!0,clearInterval(t.payorno)):1==r.status&&(t.payOk=!1,t.error=!0,clearInterval(t.payorno));case 4:case"end":return e.stop()}},e,t)})),2e3)):t.getOk=!1;case 7:case"end":return e.stop()}},e,t)}))()},message:function(t,e,r){this.$message({message:t,duration:e,type:r})},toOrder:function(){this.$router.replace({name:"order"})}},watch:{payOk:function(t,e){}},computed:{},created:function(){var t=this;return c(n.a.mark(function e(){var r,a,c;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.orderNo=t.$route.query.orderNo,!t.orderNo){e.next=11;break}return r=t.orderNo,(a=new FormData).append("orderNo",r),e.next=7,Object(s.I)(a);case 7:0==(c=e.sent).status&&c.data?t.payOk=!0:0!=c.status||c.data?(t.getOk=!1,t.message(c.msg,1500,"error")):(t.payOk=!1,t.getPayTu()),e.next=12;break;case 11:t.getOk=!1;case 12:case"end":return e.stop()}},e,t)}))()},mounted:function(){},beforeDestroy:function(){clearInterval(this.payorno)},destroyed:function(){clearInterval(this.payorno)}},o={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pay"},[t._m(0),t._v(" "),!t.getOk||t.payOk||t.cancleOk?t._e():r("div",{staticClass:"tuDiv"},[r("div",{staticClass:"tu"},[r("span",{staticStyle:{color:"rgb(116,116,116)","font-size":"16px","font-weight":"bold"}},[t._v("订单提交成功，请您尽快支付！订单号："+t._s(t.orderNo))])]),t._v(" "),t._m(1),t._v(" "),r("div",{staticClass:"tu"},[r("img",{attrs:{src:t.qrUrl,alt:""}})]),t._v(" "),r("div",{staticClass:"tu"},[r("el-button",{staticStyle:{float:"right","font-size":"16px","margin-right":"15px"},attrs:{type:"text"},on:{click:t.cancleOrder}},[t._v("取消订单")])],1)]),t._v(" "),t.error?r("div",{staticClass:"tuDiv"},[t._m(2)]):t._e(),t._v(" "),t.payOk&&!t.cancleOk?r("div",{staticClass:"tuDiv"},[t._m(3),t._v(" "),r("div",{staticClass:"successDiv"},[r("span",{on:{click:t.toOrder}},[t._v(">>前往查看订单")])])]):t._e(),t._v(" "),t.cancleOk?r("div",{staticClass:"tuDiv"},[t._m(4),t._v(" "),r("div",{staticClass:"errorDiv"},[r("span",{on:{click:t.toOrder}},[t._v(">>前往查看订单")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"payNav"},[e("span",[this._v("订单支付：")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tu"},[e("span",{staticStyle:{color:"rgb(241,41,40)","font-size":"20px"}},[this._v("请使用支付宝扫码进行支付")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"getError"},[e("img",{attrs:{src:r("Q1lq"),alt:""}}),this._v(" "),e("span",[this._v("获取订单数据失败")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"paySuccess"},[e("i",{staticClass:"el-icon-circle-check"}),e("span",[this._v("支付成功!")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"payError"},[e("i",{staticClass:"el-icon-circle-close"}),e("span",[this._v("订单取消成功!")])])}]};var u=r("VU/8")(i,o,!1,function(t){r("EJYP")},null,null);e.default=u.exports}});